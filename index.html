<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  body { font-family: sans-serif; background:#121212; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
  #loginBox { background:#1e1e1e; padding:40px; border-radius:20px; text-align:center; color:white; width:350px; }
  input, button { display:block; margin:15px 0; width:100%; padding:12px; border-radius:10px; border:none; }
  input { background:#2c2c2c; color:white; }
  button { background:#4CAF50; color:white; cursor:pointer; }
  button:hover { background:#45a049; }
  #error { color:#ff6b6b; font-weight:bold; }
</style>
</head>
<body>

<div id="loginBox">
  <h2>Login</h2>
  <input type="text" id="username" placeholder="Benutzername">
  <input type="password" id="password" placeholder="Passwort">
  <button onclick="login()">Login</button>
  <div id="error"></div>
</div>

<script>
  // Supabase initialisieren
  const SUPABASE_URL = "https://DEIN-SUPABASE-PROJECT.supabase.co";
  const SUPABASE_KEY = "DEIN-ANON-KEY";
  const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

  const admins = [
    {user: "Mister X", pass: "test"},
    {user: "Void", pass: "Tomi0815!"}
  ];

  async function login() {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value;

    const user = admins.find(u => u.user === username && u.pass === password);

    if(user){
      document.getElementById("error").innerText = "";

      // Login in Supabase speichern
      const { data, error } = await supabase
        .from('logins')
        .insert([{ username: username, login_time: new Date().toISOString() }]);

      if(error){
        console.error("Fehler beim Speichern:", error);
        alert("Fehler beim Speichern des Logins!");
      } else {
        alert("Erfolgreich eingeloggt und gespeichert!");
      }
    } else {
      document.getElementById("error").innerText = "Benutzername oder Passwort falsch!";
    }
  }
</script>

</body>
</html>
